<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Ejecutar Algoritmo Set Cover</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 30px auto; }
        label { display: block; margin-top: 10px; }
        input, button { padding: 8px; margin-top: 5px; width: 100%; }
        #result { margin-top: 20px; background: #f0f0f0; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <h1>Ejecutar Algoritmo Set Cover</h1>
    <label for="population">Tamaño de población:</label>
    <input type="number" id="population" value="100" min="1" max="1000" />
    
    <label for="generations">Número de iteraciones:</label>
    <input type="number" id="generations" value="100" min="1" max="5000" />
    
    <button id="runBtn">Ejecutar</button>
    
    <div id="result"></div>

    <script>
        const runBtn = document.getElementById('runBtn');
        const resultDiv = document.getElementById('result');

        runBtn.onclick = () => {
            const population = document.getElementById('population').value;
            const generations = document.getElementById('generations').value;

            resultDiv.textContent = "Ejecutando algoritmo, espera...";

            fetch('http://127.0.0.1:5000/run', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ population, generations })
            })
            .then(res => {
                if (!res.ok) throw new Error("Error en la petición");
                return res.json();
            })
            .then(data => {
                resultDiv.innerHTML = `
                    <strong>Resultados:</strong><br>
                    Antenas seleccionadas: ${data.antennas_selected}<br>
                    Costo total: ${data.total_cost.toFixed(2)}<br>
                    Clientes cubiertos: ${data.clients_covered} de ${data.total_clients}<br>
                    Índices seleccionados: ${data.selected_indices.join(', ')}
                `;
            })
            .catch(err => {
                resultDiv.textContent = "Error: " + err.message;
            });
        }
    </script>
</body>
</html>
